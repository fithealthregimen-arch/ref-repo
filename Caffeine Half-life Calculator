<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caffeine Half-Life Calculator: Track Your Caffeine Levels & Sleep Impact 2024</title>
    <meta name="description" content="Advanced caffeine half-life calculator with 60-minute absorption modeling. Track caffeine levels, optimize sleep quality, and prevent caffeine disruption with personalized analysis.">
    <meta name="keywords" content="caffeine half-life calculator, caffeine metabolism, sleep impact, caffeine tracker, adenosine receptors, caffeine clearance">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Caffeine Half-Life Calculator: Track Your Caffeine Levels & Sleep Impact">
    <meta property="og:description" content="Advanced caffeine half-life calculator with realistic absorption modeling and personalized sleep impact analysis.">
    <meta property="og:type" content="website">
    <link rel="canonical" href="#">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    
    <style>
        .chl-calculator-wrapper * {
            margin: 0 !important;
            padding: 0 !important;
            box-sizing: border-box !important;
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif !important;
        }

        .chl-calculator-wrapper {
            --primary-blue: #1E40AF !important;
            --secondary-blue: #2563EB !important;
            --accent-blue: #3B82F6 !important;
            --light-blue: #EBF8FF !important;
            --bg-gradient: linear-gradient(135deg, #F8FAFC, #F1F5F9) !important;
            --text-primary: #0F172A !important;
            --text-secondary: #334155 !important;
            --text-muted: #64748B !important;
            --border-color: #E2E8F0 !important;
            --card-bg: #FFFFFF !important;
            --success-color: #059669 !important;
            --warning-color: #D97706 !important;
            --error-color: #DC2626 !important;
            
            background: var(--bg-gradient) !important;
            color: var(--text-primary) !important;
            line-height: 1.5 !important;
            padding: 15px !important;
            min-height: 100vh !important;
            font-size: 16px !important;
        }

        .chl-main-container {
            max-width: 1200px !important;
            margin: 0 auto !important;
            background: var(--card-bg) !important;
            border-radius: 20px !important;
            box-shadow: 0 25px 50px -12px rgba(30, 64, 175, 0.15) !important;
            border: 1px solid var(--border-color) !important;
            overflow: hidden !important;
            position: relative !important;
        }

        .chl-main-container::before {
            content: '' !important;
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            height: 6px !important;
            background: linear-gradient(90deg, var(--primary-blue), var(--secondary-blue), var(--accent-blue)) !important;
        }

        .chl-header-section {
            text-align: center !important;
            padding: 25px 20px !important;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue)) !important;
            color: white !important;
            position: relative !important;
        }

        .chl-header-section::after {
            content: '' !important;
            position: absolute !important;
            bottom: -1px !important;
            left: 0 !important;
            right: 0 !important;
            height: 15px !important;
            background: var(--card-bg) !important;
            border-radius: 15px 15px 0 0 !important;
        }

        .chl-main-title {
            font-size: 32px !important;
            font-weight: 800 !important;
            margin-bottom: 8px !important;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2) !important;
        }

        .chl-subtitle {
            font-size: 16px !important;
            opacity: 0.9 !important;
            max-width: 600px !important;
            margin: 0 auto !important;
        }

        .chl-warning-box {
            background: #EBF8FF !important;
            border: 2px solid var(--accent-blue) !important;
            border-radius: 12px !important;
            padding: 16px 20px !important;
            margin: 20px 0 !important;
            font-size: 14px !important;
            font-weight: 600 !important;
            color: var(--primary-blue) !important;
            display: flex !important;
            align-items: center !important;
            gap: 10px !important;
        }

        .chl-calculator-form {
            padding: 25px 20px !important;
            background: var(--card-bg) !important;
        }

        .chl-form-grid {
            display: grid !important;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)) !important;
            gap: 18px !important;
            margin-bottom: 20px !important;
        }

        .chl-input-group {
            background: linear-gradient(145deg, #FFFFFF, #F8FAFC) !important;
            padding: 18px !important;
            border-radius: 12px !important;
            border: 2px solid var(--border-color) !important;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
            position: relative !important;
        }

        .chl-input-group:hover {
            border-color: var(--accent-blue) !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 10px 25px rgba(30, 64, 175, 0.1) !important;
        }

        .chl-input-label {
            display: flex !important;
            align-items: center !important;
            gap: 10px !important;
            font-weight: 700 !important;
            color: var(--text-primary) !important;
            font-size: 16px !important;
            margin-bottom: 12px !important;
        }

        .chl-input-icon {
            font-size: 20px !important;
            padding: 8px !important;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue)) !important;
            border-radius: 10px !important;
            color: white !important;
            min-width: 36px !important;
            text-align: center !important;
        }

        .chl-input-field, .chl-select-field {
            width: 100% !important;
            padding: 16px 20px !important;
            font-size: 16px !important;
            font-weight: 500 !important;
            border: 2px solid var(--border-color) !important;
            border-radius: 12px !important;
            background: var(--card-bg) !important;
            color: var(--text-primary) !important;
            transition: all 0.3s ease !important;
            outline: none !important;
        }

        .chl-input-field:focus, .chl-select-field:focus {
            border-color: var(--primary-blue) !important;
            box-shadow: 0 0 0 4px rgba(30, 64, 175, 0.1) !important;
            transform: translateY(-1px) !important;
        }

        .chl-presets {
            display: grid !important;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)) !important;
            gap: 8px !important;
            margin-top: 12px !important;
        }

        .chl-preset-btn {
            padding: 8px 12px !important;
            border: 1px solid var(--border-color) !important;
            background: var(--light-blue) !important;
            color: var(--text-primary) !important;
            border-radius: 8px !important;
            cursor: pointer !important;
            font-weight: 600 !important;
            font-size: 13px !important;
            transition: all 0.2s ease !important;
            text-align: center !important;
        }

        .chl-preset-btn:hover {
            background: var(--primary-blue) !important;
            color: white !important;
            transform: translateY(-1px) !important;
            box-shadow: 0 4px 12px rgba(30, 64, 175, 0.3) !important;
        }

        .chl-help-text {
            color: var(--text-muted) !important;
            font-size: 14px !important;
            margin-top: 8px !important;
            line-height: 1.5 !important;
        }

        .chl-calculate-btn {
            width: 100% !important;
            padding: 20px 40px !important;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue)) !important;
            color: white !important;
            border: none !important;
            border-radius: 16px !important;
            font-size: 18px !important;
            font-weight: 700 !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            gap: 12px !important;
            box-shadow: 0 8px 25px rgba(30, 64, 175, 0.3) !important;
        }

        .chl-calculate-btn:hover {
            transform: translateY(-3px) !important;
            box-shadow: 0 12px 35px rgba(30, 64, 175, 0.4) !important;
        }

        .chl-results-container {
            margin-top: 30px !important;
            opacity: 0 !important;
            transform: translateY(20px) !important;
            transition: all 0.5s ease !important;
            max-height: 0 !important;
            overflow: hidden !important;
        }

        .chl-results-container.show {
            opacity: 1 !important;
            transform: translateY(0) !important;
            max-height: 5000px !important;
        }

        .chl-results-header {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue)) !important;
            color: white !important;
            padding: 25px 30px !important;
            border-radius: 16px 16px 0 0 !important;
            text-align: center !important;
        }

        .chl-results-title {
            font-size: 24px !important;
            font-weight: 700 !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            gap: 12px !important;
        }

        .chl-dose-list {
            max-height: 300px !important;
            overflow-y: auto !important;
            border: 1px solid var(--border-color) !important;
            border-radius: 8px !important;
            background: #FFFFFF !important;
            margin-top: 12px !important;
        }

        .chl-dose-item {
            padding: 12px 16px !important;
            border-bottom: 1px solid var(--border-color) !important;
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
            transition: all 0.2s ease !important;
        }

        .chl-dose-item:last-child {
            border-bottom: none !important;
        }

        .chl-dose-item:hover {
            background: var(--light-blue) !important;
        }

        .chl-dose-info {
            flex: 1 !important;
        }

        .chl-dose-amount {
            font-weight: 700 !important;
            color: var(--primary-blue) !important;
            font-size: 16px !important;
        }

        .chl-dose-time {
            color: var(--text-muted) !important;
            font-size: 13px !important;
            margin-top: 2px !important;
        }

        .chl-delete-btn {
            background: var(--error-color) !important;
            color: white !important;
            border: none !important;
            padding: 6px 12px !important;
            border-radius: 6px !important;
            cursor: pointer !important;
            font-size: 12px !important;
            font-weight: 600 !important;
            transition: all 0.2s ease !important;
        }

        .chl-delete-btn:hover {
            background: #DC2626 !important;
            transform: translateY(-1px) !important;
        }

        .chl-empty-state {
            text-align: center !important;
            padding: 40px 20px !important;
            color: var(--text-muted) !important;
        }

        .chl-empty-state svg {
            margin-bottom: 16px !important;
            opacity: 0.5 !important;
        }

        .chl-chart-container {
            position: relative !important;
            height: 400px !important;
            margin-bottom: 30px !important;
            background: var(--card-bg) !important;
            border-radius: 12px !important;
            padding: 20px !important;
            border: 1px solid var(--border-color) !important;
        }

        .chl-export-section {
            margin: 30px 0 !important;
            padding: 25px !important;
            background: linear-gradient(145deg, #F8FAFC, var(--card-bg)) !important;
            border-radius: 16px !important;
            border: 2px solid var(--border-color) !important;
        }

        .chl-export-buttons {
            display: grid !important;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)) !important;
            gap: 12px !important;
        }

        .chl-export-btn {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue)) !important;
            color: white !important;
            border: none !important;
            padding: 14px 20px !important;
            border-radius: 10px !important;
            font-weight: 600 !important;
            font-size: 14px !important;
            cursor: pointer !important;
            transition: all 0.2s ease !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            gap: 8px !important;
            box-shadow: 0 4px 12px rgba(30, 64, 175, 0.25) !important;
        }

        .chl-export-btn:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 6px 16px rgba(30, 64, 175, 0.3) !important;
        }

        .chl-summary-section {
            background: linear-gradient(145deg, #F8FAFC, var(--card-bg)) !important;
            border: 2px solid var(--border-color) !important;
            border-radius: 16px !important;
            padding: 25px !important;
            margin-top: 30px !important;
        }

        .chl-summary-title {
            font-size: 20px !important;
            font-weight: 700 !important;
            color: var(--primary-blue) !important;
            margin-bottom: 16px !important;
            display: flex !important;
            align-items: center !important;
            gap: 10px !important;
        }

        .chl-summary-content {
            color: var(--text-secondary) !important;
            line-height: 1.6 !important;
            font-size: 16px !important;
        }

        .chl-summary-stats {
            display: grid !important;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)) !important;
            gap: 16px !important;
            margin: 20px 0 !important;
        }

        .chl-stat-card {
            text-align: center !important;
            padding: 16px !important;
            background: var(--light-blue) !important;
            border-radius: 10px !important;
            border: 1px solid var(--border-color) !important;
        }

        .chl-stat-value {
            font-size: 24px !important;
            font-weight: 800 !important;
            color: var(--primary-blue) !important;
            margin-bottom: 4px !important;
        }

        .chl-stat-label {
            color: var(--text-secondary) !important;
            font-size: 12px !important;
            font-weight: 600 !important;
        }

        .chl-warning-alert {
            background: #FEF3C7 !important;
            border: 1px solid #F59E0B !important;
            border-radius: 8px !important;
            padding: 12px 16px !important;
            margin: 16px 0 !important;
            color: #92400E !important;
            font-weight: 600 !important;
            display: flex !important;
            align-items: center !important;
            gap: 8px !important;
        }

        .chl-success-alert {
            background: #ECFDF5 !important;
            border: 1px solid #10B981 !important;
            border-radius: 8px !important;
            padding: 12px 16px !important;
            margin: 16px 0 !important;
            color: #065F46 !important;
            font-weight: 600 !important;
            display: flex !important;
            align-items: center !important;
            gap: 8px !important;
        }

        @media (max-width: 768px) {
            .chl-calculator-wrapper {
                padding: 8px !important;
            }
            
            .chl-main-title {
                font-size: 26px !important;
            }
            
            .chl-calculator-form {
                padding: 18px 12px !important;
            }
            
            .chl-form-grid {
                grid-template-columns: 1fr !important;
                gap: 15px !important;
            }
            
            .chl-input-group {
                padding: 15px !important;
            }
            
            .chl-presets {
                grid-template-columns: repeat(2, 1fr) !important;
            }
            
            .chl-chart-container {
                height: 300px !important;
                padding: 15px !important;
            }
            
            .chl-export-buttons {
                grid-template-columns: 1fr !important;
            }
            
            .chl-summary-stats {
                grid-template-columns: repeat(2, 1fr) !important;
            }
            
            .chl-stat-value {
                font-size: 20px !important;
            }
        }
    </style>

    <div class="chl-calculator-wrapper">
        <div class="chl-main-container">
            <div class="chl-header-section">
                <h1 class="chl-main-title">‚òï Caffeine Half-Life Calculator</h1>
                <p class="chl-subtitle">Advanced caffeine metabolism tracker with realistic 60-minute absorption modeling</p>
            </div>

            <div class="chl-calculator-form">
                <div class="chl-warning-box">
                    ‚ÑπÔ∏è <strong>Advanced Absorption Model:</strong> This calculator uses realistic 60-minute caffeine absorption phases and personalized half-life calculations to provide accurate caffeine level predictions and sleep impact analysis.
                </div>

                <form id="chlCalculatorForm">
                    <div class="chl-form-grid">
                        <div class="chl-input-group">
                            <label class="chl-input-label">
                                <span class="chl-input-icon">üß¨</span>
                                Your Caffeine Half-Life (hours)
                            </label>
                            <input type="number" id="halfLifeInput" class="chl-input-field" placeholder="5.7" min="1" max="20" step="0.1" value="5.7" required>
                            <div class="chl-help-text">Average is 5.7 hours. Varies by genetics, age, and health factors (1-20 hours)</div>
                        </div>

                        <div class="chl-input-group">
                            <label class="chl-input-label">
                                <span class="chl-input-icon">üåô</span>
                                Your Bedtime
                            </label>
                            <input type="time" id="bedtimeInput" class="chl-input-field" value="22:00" required>
                            <div class="chl-help-text">Your typical bedtime for personalized sleep impact analysis</div>
                        </div>

                        <div class="chl-input-group">
                            <label class="chl-input-label">
                                <span class="chl-input-icon">üò¥</span>
                                Sleep Sensitivity
                            </label>
                            <select id="sleepSensitivitySelect" class="chl-select-field" required>
                                <option value="">Select Sleep Sensitivity</option>
                                <option value="low">Low (can sleep with 100mg+)</option>
                                <option value="medium" selected>Medium (disrupted by 50mg+)</option>
                                <option value="high">High (disrupted by 25mg+)</option>
                                <option value="very-high">Very High (disrupted by 10mg+)</option>
                            </select>
                            <div class="chl-help-text">How sensitive you are to caffeine's sleep-disrupting effects</div>
                        </div>

                        <div class="chl-input-group">
                            <label class="chl-input-label">
                                <span class="chl-input-icon">‚òï</span>
                                Caffeine Amount (mg)
                            </label>
                            <input type="number" id="caffeineAmountInput" class="chl-input-field" placeholder="Enter amount" min="1" max="1000" required>
                            <div class="chl-presets">
                                <button type="button" class="chl-preset-btn" data-amount="95">Coffee (95mg)</button>
                                <button type="button" class="chl-preset-btn" data-amount="64">Espresso (64mg)</button>
                                <button type="button" class="chl-preset-btn" data-amount="160">Energy Drink (160mg)</button>
                                <button type="button" class="chl-preset-btn" data-amount="47">Black Tea (47mg)</button>
                                <button type="button" class="chl-preset-btn" data-amount="34">Green Tea (34mg)</button>
                                <button type="button" class="chl-preset-btn" data-amount="200">Caffeine Pill (200mg)</button>
                            </div>
                            <div class="chl-help-text">Select amount or click preset values above</div>
                        </div>

                        <div class="chl-input-group">
                            <label class="chl-input-label">
                                <span class="chl-input-icon">üìÖ</span>
                                Consumption Time
                            </label>
                            <input type="datetime-local" id="consumptionTimeInput" class="chl-input-field" required>
                            <div class="chl-help-text">When you consumed or will consume this caffeine dose</div>
                        </div>

                        <div class="chl-input-group">
                            <label class="chl-input-label">
                                <span class="chl-input-icon">üìã</span>
                                Your Doses
                            </label>
                            <div id="doseList" class="chl-dose-list">
                                <div class="chl-empty-state">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
                                        <line x1="3" y1="6" x2="21" y2="6"/>
                                        <path d="M16 10a4 4 0 0 1-8 0"/>
                                    </svg>
                                    <p>No doses added yet.<br>Add your first caffeine dose above!</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="button" id="addDoseBtn" class="chl-calculate-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Add Dose & Calculate
                    </button>
                </form>

                <div id="resultsContainer" class="chl-results-container">
                    <div class="chl-results-header">
                        <div class="chl-results-title">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                            Caffeine Levels Over Time
                        </div>
                    </div>
                    
                    <div style="padding: 30px; background: var(--card-bg);">
                        <div class="chl-chart-container">
                            <canvas id="caffeineChart"></canvas>
                        </div>
                        
                        <div class="chl-export-section">
                            <h3 style="color: var(--primary-blue); margin-bottom: 16px; font-size: 18px; font-weight: 700;">üì§ Export & Share</h3>
                            <div class="chl-export-buttons">
                                <button id="exportDataBtn" class="chl-export-btn">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="7,10 12,15 17,10"/>
                                        <line x1="12" y1="15" x2="12" y2="3"/>
                                    </svg>
                                    Export Data
                                </button>
                                <button id="importDataBtn" class="chl-export-btn">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="17,8 12,3 7,8"/>
                                        <line x1="12" y1="3" x2="12" y2="15"/>
                                    </svg>
                                    Import Data
                                </button>
                                <button id="shareReportBtn" class="chl-export-btn">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
                                        <polyline points="16,6 12,2 8,6"/>
                                        <line x1="12" y1="2" x2="12" y2="15"/>
                                    </svg>
                                    Share Report
                                </button>
                                <button id="downloadChartBtn" class="chl-export-btn">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                        <polyline points="14,2 14,8 20,8"/>
                                        <line x1="16" y1="13" x2="8" y2="13"/>
                                        <line x1="16" y1="17" x2="8" y2="17"/>
                                        <polyline points="10,9 9,9 8,9"/>
                                    </svg>
                                    Download Chart
                                </button>
                            </div>
                            <input type="file" id="importFileInput" accept=".json" style="display: none;">
                        </div>
                        
                        <div id="summarySection" class="chl-summary-section">
                            <!-- Summary will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Application state
        let doses = [];
        let chart = null;
        let halfLife = 5.7;
        let bedtime = '22:00';
        let sleepSensitivity = 'medium';

        // Sleep sensitivity thresholds (mg)
        const sleepThresholds = {
            'low': 100,
            'medium': 50,
            'high': 25,
            'very-high': 10
        };

        // DOM elements
        const halfLifeInput = document.getElementById('halfLifeInput');
        const bedtimeInput = document.getElementById('bedtimeInput');
        const sleepSensitivitySelect = document.getElementById('sleepSensitivitySelect');
        const caffeineAmountInput = document.getElementById('caffeineAmountInput');
        const consumptionTimeInput = document.getElementById('consumptionTimeInput');
        const addDoseBtn = document.getElementById('addDoseBtn');
        const doseList = document.getElementById('doseList');
        const resultsContainer = document.getElementById('resultsContainer');

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Set default consumption time to now
            const now = new Date();
            consumptionTimeInput.value = formatDateTimeLocal(now);
            
            // Initialize chart
            initChart();
            
            // Load saved settings
            loadSettings();
            
            // Event listeners
            halfLifeInput.addEventListener('input', handleHalfLifeChange);
            bedtimeInput.addEventListener('change', handleBedtimeChange);
            sleepSensitivitySelect.addEventListener('change', handleSleepSensitivityChange);
            addDoseBtn.addEventListener('click', handleAddDose);
            
            // Export & Import listeners
            document.getElementById('exportDataBtn').addEventListener('click', exportData);
            document.getElementById('importDataBtn').addEventListener('click', () => {
                document.getElementById('importFileInput').click();
            });
            document.getElementById('importFileInput').addEventListener('change', importData);
            document.getElementById('shareReportBtn').addEventListener('click', shareReport);
            document.getElementById('downloadChartBtn').addEventListener('click', downloadChart);
            
            // Preset buttons
            document.querySelectorAll('.chl-preset-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    caffeineAmountInput.value = this.dataset.amount;
                });
            });
        });

        function formatDateTimeLocal(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            return `${year}-${month}-${day}T${hours}:${minutes}`;
        }

        function handleHalfLifeChange() {
            halfLife = parseFloat(halfLifeInput.value);
            saveSettings();
            updateChart();
        }

        function handleBedtimeChange() {
            bedtime = bedtimeInput.value;
            saveSettings();
            updateChart();
        }

        function handleSleepSensitivityChange() {
            sleepSensitivity = sleepSensitivitySelect.value;
            saveSettings();
            updateChart();
        }

        function saveSettings() {
            const settings = {
                halfLife: halfLife,
                bedtime: bedtime,
                sleepSensitivity: sleepSensitivity
            };
            localStorage.setItem('caffeineCalculatorSettings', JSON.stringify(settings));
        }

        function loadSettings() {
            const saved = localStorage.getItem('caffeineCalculatorSettings');
            if (saved) {
                const settings = JSON.parse(saved);
                halfLife = settings.halfLife || 5.7;
                bedtime = settings.bedtime || '22:00';
                sleepSensitivity = settings.sleepSensitivity || 'medium';
                
                halfLifeInput.value = halfLife;
                bedtimeInput.value = bedtime;
                sleepSensitivitySelect.value = sleepSensitivity;
            }
        }

        function handleAddDose() {
            const amount = parseFloat(caffeineAmountInput.value);
            const timeValue = consumptionTimeInput.value;
            
            if (!amount || amount <= 0) {
                alert('Please enter a valid caffeine amount');
                return;
            }
            
            if (!timeValue) {
                alert('Please select a consumption time');
                return;
            }
            
            const consumptionTime = new Date(timeValue);
            addDose(amount, consumptionTime);
        }

        function addDose(amount, consumptionTime) {
            // Add dose to array
            doses.push({
                id: Date.now(),
                amount: amount,
                consumptionTime: consumptionTime
            });
            
            // Sort doses by time
            doses.sort((a, b) => a.consumptionTime - b.consumptionTime);
            
            // Clear amount field
            caffeineAmountInput.value = '';
            
            // Update UI
            updateDoseList();
            updateChart();
            
            // Show results section and scroll to it
            showResultsSection();
        }

        function showResultsSection() {
            resultsContainer.classList.add('show');
            
            // Smooth scroll to results section
            setTimeout(() => {
                resultsContainer.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }, 100);
        }

        function deleteDose(id) {
            doses = doses.filter(dose => dose.id !== id);
            updateDoseList();
            updateChart();
            
            if (doses.length === 0) {
                resultsContainer.classList.remove('show');
            }
        }

        function updateDoseList() {
            if (doses.length === 0) {
                doseList.innerHTML = `
                    <div class="chl-empty-state">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
                            <line x1="3" y1="6" x2="21" y2="6"/>
                            <path d="M16 10a4 4 0 0 1-8 0"/>
                        </svg>
                        <p>No doses added yet.<br>Add your first caffeine dose above!</p>
                    </div>
                `;
                return;
            }

            doseList.innerHTML = doses.map(dose => `
                <div class="chl-dose-item">
                    <div class="chl-dose-info">
                        <div class="chl-dose-amount">${dose.amount}mg</div>
                        <div class="chl-dose-time">${formatDisplayTime(dose.consumptionTime)}</div>
                    </div>
                    <button class="chl-delete-btn" onclick="deleteDose(${dose.id})">Delete</button>
                </div>
            `).join('');
        }

        function formatDisplayTime(date) {
            return date.toLocaleString('en-US', {
                weekday: 'short',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function initChart() {
            const ctx = document.getElementById('caffeineChart').getContext('2d');
            
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: [{
                        label: 'Caffeine Level (mg)',
                        data: [],
                        borderColor: '#1E40AF',
                        backgroundColor: 'rgba(30, 64, 175, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 2,
                        pointHoverRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                unit: 'hour',
                                displayFormats: {
                                    hour: 'MMM d, HH:mm'
                                }
                            },
                            title: {
                                display: true,
                                text: 'Time',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            }
                        },
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Caffeine Level (mg)',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.parsed.y.toFixed(1)}mg`;
                                }
                            }
                        }
                    },
                    interaction: {
                        mode: 'nearest',
                        axis: 'x',
                        intersect: false
                    }
                }
            });
        }

        function updateChart() {
            if (doses.length === 0) {
                chart.data.datasets[0].data = [];
                chart.update();
                updateSummary();
                document.getElementById('resultsContainer').style.display = 'none';
                return;
            }

            const simulationData = simulateCaffeineLevel();
            
            chart.data.datasets[0].data = simulationData.map(point => ({
                x: point.time,
                y: point.level
            }));
            
            chart.update();
            updateSummary(simulationData);
            
            // Show results section
            document.getElementById('resultsContainer').style.display = 'block';
            showResultsSection();
        }

        function simulateCaffeineLevel() {
            if (doses.length === 0) return [];

            // Determine simulation time range
            const now = new Date();
            const earliestDose = new Date(Math.min(...doses.map(d => d.consumptionTime.getTime())));
            const startTime = new Date(Math.min(now.getTime(), earliestDose.getTime()));
            const endTime = new Date(startTime.getTime() + 24 * 60 * 60 * 1000); // 24 hours

            const simulationData = [];
            const timeStep = 15; // minutes
            const totalSteps = (endTime - startTime) / (timeStep * 60 * 1000);

            for (let step = 0; step <= totalSteps; step++) {
                const currentTime = new Date(startTime.getTime() + step * timeStep * 60 * 1000);
                let totalCaffeine = 0;

                // Calculate contribution from each dose
                doses.forEach(dose => {
                    const timeSinceDose = (currentTime - dose.consumptionTime) / (60 * 1000); // minutes
                    
                    if (timeSinceDose >= 0) {
                        let absorbedAmount = 0;
                        
                        // 60-minute linear absorption phase
                        if (timeSinceDose <= 60) {
                            absorbedAmount = dose.amount * (timeSinceDose / 60);
                        } else {
                            absorbedAmount = dose.amount;
                        }
                        
                        // Apply exponential decay to absorbed amount
                        const hoursElapsed = timeSinceDose / 60;
                        const decayFactor = Math.pow(0.5, hoursElapsed / halfLife);
                        const currentLevel = absorbedAmount * decayFactor;
                        
                        totalCaffeine += currentLevel;
                    }
                });

                simulationData.push({
                    time: currentTime,
                    level: Math.max(0, totalCaffeine)
                });
            }

            return simulationData;
        }

        function updateSummary(simulationData = null) {
            const summarySection = document.getElementById('summarySection');
            
            if (!simulationData || simulationData.length === 0) {
                summarySection.innerHTML = `
                    <div class="chl-summary-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 6v6l4 2"/>
                        </svg>
                        Sleep Impact Analysis
                    </div>
                    <div class="chl-summary-content">
                        Add caffeine doses to see personalized insights about your caffeine levels and sleep impact.
                    </div>
                `;
                return;
            }

            const now = new Date();
            const currentLevel = getCurrentCaffeineLevel(now, simulationData);
            const userBedtime = calculatePersonalizedBedtime(now);
            const bedtimeLevel = getCurrentCaffeineLevel(userBedtime, simulationData);
            
            // Find peak level in next 24 hours
            const next24Hours = simulationData.filter(point => 
                point.time >= now && point.time <= new Date(now.getTime() + 24 * 60 * 60 * 1000)
            );
            const peakLevel = Math.max(...next24Hours.map(point => point.level));
            
            // Calculate total daily intake
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            const todaysDoses = doses.filter(dose => 
                dose.consumptionTime >= today && dose.consumptionTime < tomorrow
            );
            const totalToday = todaysDoses.reduce((sum, dose) => sum + dose.amount, 0);
            
            const bedtimeDisplay = userBedtime.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
            const sleepThreshold = sleepThresholds[sleepSensitivity];
            
            let summaryHTML = `
                <div class="chl-summary-title">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 6v6l4 2"/>
                    </svg>
                    Sleep Impact Analysis
                </div>
                
                <div class="chl-summary-stats">
                    <div class="chl-stat-card">
                        <div class="chl-stat-value">${currentLevel.toFixed(1)}mg</div>
                        <div class="chl-stat-label">Current Level</div>
                    </div>
                    <div class="chl-stat-card">
                        <div class="chl-stat-value">${bedtimeLevel.toFixed(1)}mg</div>
                        <div class="chl-stat-label">Bedtime Level</div>
                    </div>
                    <div class="chl-stat-card">
                        <div class="chl-stat-value">${totalToday}mg</div>
                        <div class="chl-stat-label">Today's Total</div>
                    </div>
                    <div class="chl-stat-card">
                        <div class="chl-stat-value">${peakLevel.toFixed(1)}mg</div>
                        <div class="chl-stat-label">Peak (24h)</div>
                    </div>
                </div>
                
                <div class="chl-summary-content">
                    <p><strong>Bedtime estimate (${bedtimeDisplay}):</strong> ${bedtimeLevel.toFixed(1)}mg</p>
                    <p><strong>Sleep sensitivity threshold:</strong> ${sleepThreshold}mg</p>
                </div>
            `;
            
            // Add warnings
            if (totalToday > 400) {
                summaryHTML += `
                    <div class="chl-warning-alert">
                        ‚ö†Ô∏è Today's intake (${totalToday}mg) exceeds FDA daily guideline of 400mg. Consider reducing future doses.
                    </div>
                `;
            }
            
            if (bedtimeLevel > sleepThreshold) {
                summaryHTML += `
                    <div class="chl-warning-alert">
                        üåô Bedtime caffeine level (${bedtimeLevel.toFixed(1)}mg) exceeds your sensitivity threshold (${sleepThreshold}mg). This may disrupt sleep quality.
                    </div>
                `;
            } else if (bedtimeLevel > 0) {
                summaryHTML += `
                    <div class="chl-success-alert">
                        ‚úÖ Your bedtime caffeine level should not significantly impact sleep quality based on your sensitivity.
                    </div>
                `;
            }
            
            summarySection.innerHTML = summaryHTML;
        }

        function getCurrentCaffeineLevel(targetTime, simulationData) {
            // Find the closest data point to the target time
            let closest = simulationData[0];
            let minDiff = Math.abs(targetTime - closest.time);
            
            for (let point of simulationData) {
                const diff = Math.abs(targetTime - point.time);
                if (diff < minDiff) {
                    minDiff = diff;
                    closest = point;
                }
            }
            
            return closest ? closest.level : 0;
        }

        function calculatePersonalizedBedtime(currentTime) {
            const [hours, minutes] = bedtime.split(':').map(Number);
            const bedtimeToday = new Date(currentTime);
            bedtimeToday.setHours(hours, minutes, 0, 0);
            
            // If current time is past bedtime, use tomorrow's bedtime
            if (currentTime >= bedtimeToday) {
                bedtimeToday.setDate(bedtimeToday.getDate() + 1);
            }
            
            return bedtimeToday;
        }

        // Export & Import Functions
        function exportData() {
            const exportData = {
                version: '1.0',
                timestamp: new Date().toISOString(),
                settings: {
                    halfLife,
                    bedtime,
                    sleepSensitivity
                },
                doses: doses.map(dose => ({
                    ...dose,
                    consumptionTime: dose.consumptionTime.toISOString()
                }))
            };
            
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `caffeine-data-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    
                    // Validate data structure
                    if (!importedData.version || !importedData.settings || !importedData.doses) {
                        throw new Error('Invalid file format');
                    }
                    
                    // Import settings
                    halfLife = importedData.settings.halfLife || 5.7;
                    bedtime = importedData.settings.bedtime || '22:00';
                    sleepSensitivity = importedData.settings.sleepSensitivity || 'medium';
                    
                    // Update UI
                    halfLifeInput.value = halfLife;
                    bedtimeInput.value = bedtime;
                    sleepSensitivitySelect.value = sleepSensitivity;
                    
                    // Import doses
                    doses = importedData.doses.map(dose => ({
                        ...dose,
                        consumptionTime: new Date(dose.consumptionTime)
                    }));
                    
                    // Save and update
                    saveSettings();
                    updateDoseList();
                    updateChart();
                    
                    // Show results if there are doses
                    if (doses.length > 0) {
                        showResultsSection();
                    }
                    
                    alert('Data imported successfully!');
                } catch (error) {
                    alert('Error importing data: ' + error.message);
                }
            };
            reader.readAsText(file);
            
            // Reset file input
            event.target.value = '';
        }

        function shareReport() {
            const now = new Date();
            const simulationData = simulateCaffeineLevel();
            const currentLevel = getCurrentCaffeineLevel(now, simulationData);
            const userBedtime = calculatePersonalizedBedtime(now);
            const bedtimeLevel = getCurrentCaffeineLevel(userBedtime, simulationData);
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            const todaysDoses = doses.filter(dose => 
                dose.consumptionTime >= today && dose.consumptionTime < tomorrow
            );
            const totalToday = todaysDoses.reduce((sum, dose) => sum + dose.amount, 0);
            
            const report = `‚òï Caffeine Half-Life Analysis Report
Generated: ${now.toLocaleString()}

üë§ Personal Settings:
‚Ä¢ Half-life: ${halfLife} hours
‚Ä¢ Bedtime: ${bedtime}
‚Ä¢ Sleep sensitivity: ${sleepSensitivity}

üìä Current Status:
‚Ä¢ Current caffeine level: ${currentLevel.toFixed(1)}mg
‚Ä¢ Today's total intake: ${totalToday}mg
‚Ä¢ Bedtime level estimate: ${bedtimeLevel.toFixed(1)}mg
‚Ä¢ Sleep impact: ${bedtimeLevel > sleepThresholds[sleepSensitivity] ? 'May disrupt sleep' : 'Should not disrupt sleep'}

‚òï Today's Doses:
${todaysDoses.map(dose => 
    `‚Ä¢ ${dose.amount}mg at ${dose.consumptionTime.toLocaleTimeString()}`
).join('\n') || '‚Ä¢ No doses recorded today'}

üîó Generated by: Caffeine Half-Life Calculator
Advanced absorption modeling with personalized sleep analysis`;

            if (navigator.share) {
                navigator.share({
                    title: 'Caffeine Analysis Report',
                    text: report
                });
            } else {
                navigator.clipboard.writeText(report).then(() => {
                    alert('Report copied to clipboard!');
                }).catch(() => {
                    // Fallback: show report in popup
                    const popup = window.open('', '_blank', 'width=600,height=400');
                    popup.document.write(`<pre style="font-family: monospace; padding: 20px; line-height: 1.5;">${report}</pre>`);
                });
            }
        }

        function downloadChart() {
            if (!chart || doses.length === 0) {
                alert('No chart data available to download');
                return;
            }
            
            const link = document.createElement('a');
            link.download = `caffeine-chart-${new Date().toISOString().split('T')[0]}.png`;
            link.href = chart.toBase64Image();
            link.click();
        }
    </script>

    <!-- SEO Content Sections -->
    <div class="chl-calculator-wrapper">
        <div class="chl-main-container" style="margin-top: 30px !important;">
            <section class="chl-seo-section">
                <h2 class="chl-section-heading">What is Caffeine Half-Life?</h2>
                <div class="chl-content-grid">
                    <div class="chl-content-card">
                       
                        <p>
                            Caffeine half-life represents the time required for your body to eliminate half of the consumed caffeine. 
                            <a href="https://www.ncbi.nlm.nih.gov/books/NBK223808/" target="_blank" rel="dofollow">Research from the National Institute of Medicine</a> 
                            shows that the mean half-life of caffeine in healthy individuals is approximately 5.7 hours, but can range from 1.5 to 9.5 hours 
                            depending on individual factors including genetics, age, pregnancy, smoking status, and medication use. Our calculator uses 
                            advanced pharmacokinetic modeling to provide personalized caffeine level predictions.
                        </p>
                    </div>
                </div>
                <div class="chl-content-grid">
                    <div class="chl-content-card">
                        <h3>Advanced 60-Minute Absorption Modeling</h3>
                        <p>
                            Unlike basic calculators that assume instant absorption, our tool models the realistic 60-minute absorption phase. 
                            <a href="https://www.ncbi.nlm.nih.gov/books/NBK223808/" target="_blank" rel="dofollow">Scientific studies demonstrate</a> that caffeine is 
                            rapidly absorbed with 99% absorption within 45 minutes, but peak plasma concentrations occur between 15-120 minutes 
                            after oral ingestion. This advanced modeling provides more accurate predictions for optimal caffeine timing and sleep impact analysis.
                        </p>
                    </div>
                </div>
                <div class="chl-content-grid">
                    <div class="chl-content-card">
                        <h3>Adenosine Receptor Antagonism</h3>
                        <p>
                            Caffeine's primary mechanism involves blocking adenosine receptors in the brain, preventing natural sleepiness signals. 
                            <a href="https://fitliferegime.com/10-best-chest-exercises-and-workout/" target="_blank" rel="dofollow">Fitness enthusiasts</a> 
                            often use caffeine strategically before workouts, but understanding its 6-8 hour active period is crucial for maintaining 
                            sleep quality. Our calculator helps optimize both performance benefits and sleep hygiene.
                        </p>
                    </div>
                </div>
            </section>

            <section class="chl-seo-section">
                <h2 class="chl-section-heading">Caffeine Pharmacology & Individual Variation</h2>
                <div class="chl-mechanism-container">
                    <div class="chl-mechanism-card">
                        <div class="chl-mechanism-header">Genetic Polymorphisms in Caffeine Metabolism</div>
                        <div class="chl-mechanism-content">
                            <p>
                                Approximately 75-80% of caffeine is metabolized to paraxanthine through cytochrome P4501A2 enzymes. 
                                <a href="https://www.sciencedirect.com/science/article/pii/S2772417424000104" target="_blank" rel="dofollow">Recent research</a> 
                                identifies genetic variations that create fast and slow caffeine metabolizers, with significant implications for 
                                cardiovascular health and optimal dosing strategies.
                            </p>
                            <div class="chl-mechanism-detail">
                                <strong>Fast Metabolizers (50% of population):</strong> Clear caffeine in 2-4 hours, can tolerate higher doses
                            </div>
                            <div class="chl-mechanism-detail">
                                <strong>Slow Metabolizers (25% of population):</strong> Require 8-12 hours for clearance, more sensitive to effects
                            </div>
                        </div>
                    </div>

                    <div class="chl-mechanism-card">
                        <div class="chl-mechanism-header">Age & Physiological Factors</div>
                        <div class="chl-mechanism-content">
                            <p>
                                Caffeine metabolism varies significantly across life stages and health conditions. Pregnant women experience 
                                dramatically prolonged half-lives (10-18 hours), while elderly individuals show 30-50% slower clearance rates. 
                                <a href="https://fitliferegime.com/best-arm-workout-for-men-for-bigger-arms/" target="_blank" rel="dofollow">Athletes and fitness enthusiasts</a> 
                                often have enhanced metabolism due to increased liver enzyme activity.
                            </p>
                            <div class="chl-mechanism-detail">
                                <strong>Factors Affecting Metabolism:</strong> Age, pregnancy, oral contraceptives, smoking, altitude, liver function
                            </div>
                        </div>
                    </div>

                    <div class="chl-mechanism-card">
                        <div class="chl-mechanism-header">Sleep Impact & Circadian Disruption</div>
                        <div class="chl-mechanism-content">
                            <p>
                                Caffeine's adenosine receptor antagonism directly interferes with natural sleep-wake cycles. 
                                <a href="https://www.sciencedirect.com/science/article/pii/S2214750018303275" target="_blank" rel="dofollow">Sleep studies demonstrate</a> 
                                that caffeine consumed 6 hours before bedtime significantly reduces sleep duration and quality, even when individuals 
                                don't perceive subjective sleep disturbances.
                            </p>
                            <div class="chl-mechanism-detail">
                                <strong>Sleep Disruption Thresholds:</strong> 25-100mg at bedtime can reduce sleep efficiency by 10-15%
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="chl-seo-section">
                <h2 class="chl-section-heading">Common Caffeine Sources & Content</h2>
                <div class="chl-sources-grid">
                    <div class="chl-source-category">
                        <h3>Coffee & Espresso</h3>
                        <div class="chl-source-items">
                            <div class="chl-source-item">
                                <span class="chl-source-name">Brewed Coffee (8 oz)</span>
                                <span class="chl-source-amount">80-100mg</span>
                            </div>
                            <div class="chl-source-item">
                                <span class="chl-source-name">Espresso (1 shot)</span>
                                <span class="chl-source-amount">64mg</span>
                            </div>
                            <div class="chl-source-item">
                                <span class="chl-source-name">Cold Brew (8 oz)</span>
                                <span class="chl-source-amount">100-200mg</span>
                            </div>
                            <div class="chl-source-item">
                                <span class="chl-source-name">Instant Coffee (8 oz)</span>
                                <span class="chl-source-amount">30-90mg</span>
                            </div>
                        </div>
                    </div>

                    <div class="chl-source-category">
                        <h3>Tea Varieties</h3>
                        <div class="chl-source-items">
                            <div class="chl-source-item">
                                <span class="chl-source-name">Black Tea (8 oz)</span>
                                <span class="chl-source-amount">40-70mg</span>
                            </div>
                            <div class="chl-source-item">
                                <span class="chl-source-name">Green Tea (8 oz)</span>
                                <span class="chl-source-amount">25-50mg</span>
                            </div>
                            <div class="chl-source-item">
                                <span class="chl-source-name">White Tea (8 oz)</span>
                                <span class="chl-source-amount">15-30mg</span>
                            </div>
                            <div class="chl-source-item">
                                <span class="chl-source-name">Oolong Tea (8 oz)</span>
                                <span class="chl-source-amount">30-50mg</span>
                            </div>
                        </div>
                    </div>

                    <div class="chl-source-category">
                        <h3>Energy Drinks & Sodas</h3>
                        <div class="chl-source-items">
                            <div class="chl-source-item">
                                <span class="chl-source-name">Red Bull (8.4 oz)</span>
                                <span class="chl-source-amount">80mg</span>
                            </div>
                            <div class="chl-source-item">
                                <span class="chl-source-name">Monster Energy (16 oz)</span>
                                <span class="chl-source-amount">160mg</span>
                            </div>
                            <div class="chl-source-item">
                                <span class="chl-source-name">Coca-Cola (12 oz)</span>
                                <span class="chl-source-amount">34mg</span>
                            </div>
                            <div class="chl-source-item">
                                <span class="chl-source-name">Mountain Dew (12 oz)</span>
                                <span class="chl-source-amount">54mg</span>
                            </div>
                        </div>
                    </div>

                    <div class="chl-source-category">
                        <h3>Supplements & Pre-Workouts</h3>
                        <div class="chl-source-items">
                            <div class="chl-source-item">
                                <span class="chl-source-name">Caffeine Pill</span>
                                <span class="chl-source-amount">100-200mg</span>
                            </div>
                            <div class="chl-source-item">
                                <span class="chl-source-name">Pre-workout Supplement</span>
                                <span class="chl-source-amount">150-300mg</span>
                            </div>
                            <div class="chl-source-item">
                                <span class="chl-source-name">Excedrin (2 tablets)</span>
                                <span class="chl-source-amount">130mg</span>
                            </div>
                            <div class="chl-source-item">
                                <span class="chl-source-name">Dark Chocolate (1 oz)</span>
                                <span class="chl-source-amount">12mg</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="chl-seo-section">
                <h2 class="chl-section-heading">Health Effects & Safety Guidelines</h2>
                <div class="chl-table-wrapper">
                    <table class="chl-standards-table">
                        <thead>
                            <tr>
                                <th>Population</th>
                                <th>Recommended Limit</th>
                                <th>Half-Life Range</th>
                                <th>Special Considerations</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Healthy Adults</strong></td>
                                <td>400mg/day</td>
                                <td>3-7 hours</td>
                                <td>Standard metabolism, individual variation</td>
                            </tr>
                            <tr>
                                <td><strong>Pregnant Women</strong></td>
                                <td>200mg/day</td>
                                <td>10-18 hours</td>
                                <td>Significantly prolonged elimination</td>
                            </tr>
                            <tr>
                                <td><strong>Adolescents (12-18)</strong></td>
                                <td>100mg/day</td>
                                <td>3-5 hours</td>
                                <td>Developing nervous system sensitivity</td>
                            </tr>
                            <tr>
                                <td><strong>Elderly (65+)</strong></td>
                                <td>200-300mg/day</td>
                                <td>6-10 hours</td>
                                <td>Slower metabolism, medication interactions</td>
                            </tr>
                            <tr>
                                <td><strong>Athletes</strong></td>
                                <td>3-6mg/kg body weight</td>
                                <td>2-5 hours</td>
                                <td>Enhanced metabolism, performance benefits</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="chl-standards-note">
                    <strong>FDA Guidelines:</strong> The FDA recommends limiting caffeine intake to 400mg per day for healthy adults. 
                    <a href="https://fitliferegime.com/10-best-triceps-workout-with-dumbbells-for-mass-strength/" target="_blank" rel="dofollow">Fitness enthusiasts</a> 
                    should consider timing caffeine intake 30-60 minutes before workouts for optimal performance benefits while avoiding late-day consumption.
                </p>
            </section>

            <section class="chl-seo-section">
                <h2 class="chl-section-heading">Caffeine Timing & Optimization Strategies</h2>
                <div class="chl-content-grid">
                    <div class="chl-content-card">
                        <h3>üéØ Optimal Timing for Performance</h3>
                        <p>
                            For maximum cognitive and physical performance benefits, consume caffeine 30-60 minutes before the desired effect. 
                            <a href="https://www.ncbi.nlm.nih.gov/books/NBK223808/" target="_blank" rel="dofollow">Military performance studies</a> show that 
                            caffeine doses of 200-400mg provide optimal alertness improvements. 
                            <a href="https://fitliferegime.com/10-best-shoulder-exercises-and-workout/" target="_blank" rel="dofollow">Strength training</a> 
                            benefits peak 45-60 minutes post-consumption, while avoiding intake within 6-8 hours of planned sleep time.
                        </p>
                    </div>
                </div>
                <div class="chl-content-grid">
                    <div class="chl-content-card">
                        <h3>‚è∞ Circadian Rhythm Optimization</h3>
                        <p>
                            Delay your first caffeine dose 90-120 minutes after waking to avoid interfering with natural cortisol production. 
                            <a href="https://fitliferegime.com/12-best-back-exercises-and-workout-for-mass-strength/" target="_blank" rel="dofollow">Morning workouts</a> 
                            can benefit from strategic caffeine timing, but avoid consuming caffeine immediately upon waking when cortisol levels are naturally high.
                        </p>
                    </div>
                </div>
                <div class="chl-content-grid">
                    <div class="chl-content-card">
                        <h3>üîÑ Tolerance Management & Cycling</h3>
                        <p>
                            To maintain caffeine effectiveness and prevent tolerance, consider periodic caffeine cycling. 
                            <a href="https://www.ncbi.nlm.nih.gov/books/NBK519490/" target="_blank" rel="dofollow">Research suggests</a> that 7-12 day breaks 
                            can restore caffeine sensitivity. Gradual reduction (25% per week) minimizes withdrawal symptoms while maintaining 
                            cognitive function during transition periods.
                        </p>
                    </div>
                </div>
            </section>

            <section class="chl-seo-section">
                <h2 class="chl-section-heading">Sleep Quality & Caffeine Interaction</h2>
                <div class="chl-content-grid">
                    <div class="chl-content-card">
                        <h3>üåô Sleep Architecture Impact</h3>
                        <p>
                            Caffeine consumption within 6 hours of bedtime significantly reduces sleep quality and duration. 
                            <a href="https://www.sciencedirect.com/science/article/pii/S2214750018303275" target="_blank" rel="dofollow">Sleep research</a> 
                            demonstrates that even 50mg of caffeine at bedtime can reduce sleep efficiency by 10-15%. Our calculator helps determine 
                            personalized cutoff times based on your individual half-life and sleep sensitivity.
                        </p>
                    </div>
                </div>
                <div class="chl-content-grid">
                    <div class="chl-content-card">
                        <h3>üò¥ Individual Sleep Sensitivity</h3>
                        <p>
                            Sleep sensitivity to caffeine varies dramatically between individuals. Some people can consume 100mg+ before bed without 
                            noticeable effects, while others are disrupted by as little as 10mg. Factors include genetic variations, age, regular 
                            caffeine use, and overall sleep health. Use our sensitivity settings to get personalized recommendations.
                        </p>
                    </div>
                </div>
                <div class="chl-content-grid">
                    <div class="chl-content-card">
                        <h3>üèÉ‚Äç‚ôÇÔ∏è Exercise & Sleep Interaction</h3>
                        <p>
                            <a href="https://fitliferegime.com/15-best-leg-exercises-and-workout-for-strength/" target="_blank" rel="dofollow">Evening workouts</a> 
                            combined with caffeine can significantly impact sleep quality. While caffeine enhances exercise performance, consuming 
                            it within 4-6 hours of bedtime can compound sleep disruption from both the stimulant effects and post-exercise arousal.
                        </p>
                    </div>
                </div>
            </section>

            <section class="chl-seo-section">
                <h2 class="chl-section-heading">Scientific Research & Evidence Base</h2>
                <div class="chl-research-container">
                    <div class="chl-research-card">
                        <h4>Caffeine Pharmacology Foundation</h4>
                        <p>
                            <strong>"Pharmacology of Caffeine"</strong><br>
                            <a href="https://www.ncbi.nlm.nih.gov/books/NBK223808/" target="_blank" rel="dofollow">Institute of Medicine, National Academy of Sciences</a> - 
                            This comprehensive review provides the foundational understanding of caffeine's pharmacokinetics, metabolism, and physiological effects. 
                            The research establishes the 5.7-hour average half-life and documents wide individual variation (1.5-9.5 hours) in caffeine elimination.
                        </p>
                    </div>
                    <div class="chl-research-card">
                        <h4>Genetic Variations in Caffeine Metabolism</h4>
                        <p>
                            <strong>"Caffeine metabolism and cardiovascular disease"</strong><br>
                            <a href="https://www.sciencedirect.com/science/article/pii/S2772417424000104" target="_blank" rel="dofollow">Current Research in Physiology</a> - 
                            Recent research identifying genetic polymorphisms in CYP1A2 enzymes that create fast and slow caffeine metabolizers, 
                            with significant implications for cardiovascular health and personalized caffeine recommendations.
                        </p>
                    </div>
                    <div class="chl-research-card">
                        <h4>Sleep Impact Research</h4>
                        <p>
                            <strong>"Caffeine effects on sleep and sleep disorders"</strong><br>
                            <a href="https://www.sciencedirect.com/science/article/pii/S2214750018303275" target="_blank" rel="dofollow">Sleep Medicine Reviews</a> - 
                            Comprehensive analysis of caffeine's effects on sleep architecture, demonstrating that even moderate doses 
                            consumed 6 hours before bedtime significantly impact sleep quality and duration.
                        </p>
                    </div>
                </div>
            </section>

            <section class="chl-seo-section">
                <h2 class="chl-section-heading">Frequently Asked Questions</h2>
                <div class="chl-faq-container">
                    <div class="chl-faq-item">
                        <h3>How accurate is this caffeine half-life calculator?</h3>
                        <p>
                            Our calculator uses scientifically validated pharmacokinetic models based on research from the Institute of Medicine. 
                            It incorporates realistic 60-minute absorption phases and individual half-life variations. While highly accurate for 
                            population averages, individual responses may vary by ¬±20% due to genetic factors, health conditions, and lifestyle factors.
                        </p>
                    </div>
                    <div class="chl-faq-item">
                        <h3>Why does my caffeine sensitivity differ from others?</h3>
                        <p>
                            Caffeine sensitivity varies significantly due to genetic polymorphisms in CYP1A2 enzymes responsible for caffeine metabolism. 
                            Fast metabolizers (50% of population) clear caffeine quickly, while slow metabolizers (25% of population) may experience 
                            effects for 8-12 hours. Age, pregnancy, medications, and smoking also influence sensitivity.
                        </p>
                    </div>
                    <div class="chl-faq-item">
                        <h3>How long before bed should I stop consuming caffeine?</h3>
                        <p>
                            Research shows that caffeine consumed within 6 hours of bedtime can significantly disrupt sleep. However, individual 
                            variation means some people need 8-10 hours, while others may tolerate caffeine 3-4 hours before bed. 
                            Use our calculator to determine your personal cutoff time based on your half-life and sleep sensitivity.
                        </p>
                    </div>
                    <div class="chl-faq-item">
                        <h3>Can I use this calculator for pre-workout timing?</h3>
                        <p>
                            Yes! <a href="https://fitliferegime.com/10-best-bicep-exercises-to-build-bigger-and-stronger-arms/" target="_blank" rel="dofollow">Pre-workout caffeine timing</a> 
                            is crucial for optimal performance. Consume caffeine 30-60 minutes before training for peak effects. Our calculator helps 
                            you time doses to maximize workout benefits while avoiding sleep disruption from evening training sessions.
                        </p>
                    </div>
                    <div class="chl-faq-item">
                        <h3>What happens if I exceed the FDA daily limit?</h3>
                        <p>
                            Exceeding 400mg/day may cause restlessness, anxiety, rapid heartbeat, and sleep disruption. Acute doses above 1g can cause 
                            severe symptoms including tremors and cardiac arrhythmias. If you regularly exceed recommended limits, consider gradual reduction 
                            to avoid withdrawal symptoms like headaches and fatigue.
                        </p>
                    </div>
                </div>
            </section>

            <div class="chl-disclaimer">
                <h3>‚öïÔ∏è Medical Disclaimer</h3>
                <p>
                    This caffeine half-life calculator provides estimates based on scientific research and should not replace professional medical advice. 
                    Individual caffeine metabolism varies significantly due to genetics, medical conditions, medications, and other factors. 
                    The calculator provides population averages and may not accurately reflect individual metabolic variations. 
                    Consult with healthcare professionals before making significant dietary changes, especially if you have pre-existing health conditions, 
                    are pregnant, breastfeeding, or taking medications that may interact with caffeine. The calculations provided are for educational purposes only.
                </p>
            </div>
        </div>
    </div>

    <style>
        /* SEO Content Styles */
        .chl-seo-section {
            margin: 25px 0 !important;
            padding: 25px !important;
            background: var(--card-bg) !important;
            border-radius: 16px !important;
            border: 1px solid var(--border-color) !important;
            box-shadow: 0 4px 12px rgba(30, 64, 175, 0.08) !important;
        }

        .chl-section-heading {
            font-size: 28px !important;
            font-weight: 700 !important;
            color: var(--text-primary) !important;
            margin-bottom: 20px !important;
            text-align: center !important;
            padding: 20px !important;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue)) !important;
            color: white !important;
            border-radius: 12px !important;
            box-shadow: 0 4px 12px rgba(30, 64, 175, 0.2) !important;
        }

        .chl-content-grid {
            display: grid !important;
            grid-template-columns: 1fr !important;
            gap: 20px !important;
            margin-top: 20px !important;
        }

        .chl-content-card {
            background: linear-gradient(145deg, #F8FAFC, var(--card-bg)) !important;
            padding: 25px !important;
            border-radius: 12px !important;
            border: 2px solid var(--border-color) !important;
            transition: all 0.3s ease !important;
        }

        .chl-content-card:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 8px 24px rgba(30, 64, 175, 0.12) !important;
            border-color: var(--accent-blue) !important;
        }

        .chl-content-card h3 {
            color: var(--primary-blue) !important;
            font-size: 20px !important;
            font-weight: 700 !important;
            margin-bottom: 16px !important;
            padding-bottom: 8px !important;
            border-bottom: 2px solid var(--light-blue) !important;
        }

        .chl-content-card p {
            color: var(--text-secondary) !important;
            line-height: 1.7 !important;
            margin: 0 !important;
            font-size: 16px !important;
        }

        .chl-content-card a {
            color: var(--primary-blue) !important;
            text-decoration: none !important;
            font-weight: 600 !important;
        }

        .chl-content-card a:hover {
            text-decoration: underline !important;
        }

        .chl-mechanism-container {
            display: grid !important;
            gap: 24px !important;
            margin-top: 20px !important;
        }

        .chl-mechanism-card {
            background: var(--light-blue) !important;
            border: 2px solid var(--primary-blue) !important;
            border-radius: 16px !important;
            overflow: hidden !important;
            transition: all 0.3s ease !important;
        }

        .chl-mechanism-card:hover {
            transform: translateY(-4px) !important;
            box-shadow: 0 12px 32px rgba(30, 64, 175, 0.15) !important;
        }

        .chl-mechanism-header {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue)) !important;
            color: white !important;
            padding: 16px 20px !important;
            font-size: 18px !important;
            font-weight: 700 !important;
            text-align: center !important;
        }

        .chl-mechanism-content {
            padding: 24px !important;
        }

        .chl-mechanism-content p {
            color: var(--text-secondary) !important;
            line-height: 1.7 !important;
            margin-bottom: 16px !important;
            font-size: 16px !important;
        }

        .chl-mechanism-content a {
            color: var(--primary-blue) !important;
            text-decoration: none !important;
            font-weight: 600 !important;
        }

        .chl-mechanism-content a:hover {
            text-decoration: underline !important;
        }

        .chl-mechanism-detail {
            background: #FEF3C7 !important;
            border: 1px solid #F59E0B !important;
            border-radius: 8px !important;
            padding: 12px 16px !important;
            font-size: 14px !important;
            font-weight: 600 !important;
            color: #92400E !important;
            margin-bottom: 12px !important;
        }

        .chl-sources-grid {
            display: grid !important;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)) !important;
            gap: 20px !important;
            margin-top: 20px !important;
        }

        .chl-source-category {
            background: var(--light-blue) !important;
            padding: 20px !important;
            border-radius: 12px !important;
            border: 1px solid var(--border-color) !important;
        }

        .chl-source-category h3 {
            color: white !important;
            font-size: 18px !important;
            font-weight: 700 !important;
            margin-bottom: 16px !important;
            background: var(--primary-blue) !important;
            padding: 12px 16px !important;
            border-radius: 8px !important;
            margin: -8px -8px 16px -8px !important;
            text-align: center !important;
        }

        .chl-source-items {
            display: grid !important;
            gap: 8px !important;
        }

        .chl-source-item {
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
            padding: 8px 12px !important;
            background: white !important;
            border-radius: 6px !important;
            border: 1px solid var(--border-color) !important;
        }

        .chl-source-name {
            font-weight: 500 !important;
            color: var(--text-primary) !important;
            font-size: 14px !important;
        }

        .chl-source-amount {
            font-weight: 700 !important;
            color: var(--primary-blue) !important;
            font-size: 14px !important;
        }

        .chl-table-wrapper {
            overflow-x: auto !important;
            margin: 20px 0 !important;
            border-radius: 12px !important;
            border: 2px solid var(--border-color) !important;
        }

        .chl-standards-table {
            width: 100% !important;
            border-collapse: collapse !important;
            background: var(--card-bg) !important;
            font-size: 14px !important;
        }

        .chl-standards-table th,
        .chl-standards-table td {
            padding: 14px 16px !important;
            text-align: left !important;
            border-bottom: 1px solid var(--border-color) !important;
        }

        .chl-standards-table th {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue)) !important;
            color: white !important;
            font-weight: 600 !important;
            font-size: 13px !important;
        }

        .chl-standards-table td {
            color: var(--text-secondary) !important;
        }

        .chl-standards-note {
            margin-top: 16px !important;
            padding: 12px 16px !important;
            background: var(--light-blue) !important;
            border-radius: 8px !important;
            border-left: 4px solid var(--primary-blue) !important;
            font-size: 14px !important;
            color: var(--text-secondary) !important;
        }

        .chl-research-container {
            display: grid !important;
            gap: 20px !important;
            margin-top: 20px !important;
        }

        .chl-research-card {
            background: linear-gradient(145deg, #F8FAFC, var(--card-bg)) !important;
            padding: 25px !important;
            border-radius: 12px !important;
            border: 2px solid var(--border-color) !important;
            transition: all 0.3s ease !important;
        }

        .chl-research-card:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 8px 20px rgba(30, 64, 175, 0.1) !important;
            border-color: var(--accent-blue) !important;
        }

        .chl-research-card h4 {
            color: var(--primary-blue) !important;
            font-size: 18px !important;
            font-weight: 700 !important;
            margin-bottom: 12px !important;
            padding-bottom: 8px !important;
            border-bottom: 2px solid var(--light-blue) !important;
        }

        .chl-research-card p {
            color: var(--text-secondary) !important;
            line-height: 1.7 !important;
            margin: 0 !important;
            font-size: 16px !important;
        }

        .chl-research-card a {
            color: var(--primary-blue) !important;
            text-decoration: none !important;
            font-weight: 600 !important;
        }

        .chl-research-card a:hover {
            text-decoration: underline !important;
        }

        .chl-faq-container {
            margin-top: 20px !important;
        }

        .chl-faq-item {
            background: var(--light-blue) !important;
            padding: 24px !important;
            border-radius: 12px !important;
            border: 1px solid var(--border-color) !important;
            margin-bottom: 16px !important;
            transition: all 0.2s ease !important;
        }

        .chl-faq-item:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 8px 24px rgba(30, 64, 175, 0.1) !important;
        }

        .chl-faq-item h3 {
            color: white !important;
            font-size: 18px !important;
            font-weight: 700 !important;
            margin-bottom: 12px !important;
            background: var(--primary-blue) !important;
            padding: 12px 16px !important;
            border-radius: 8px !important;
            margin: -8px -8px 16px -8px !important;
        }

        .chl-faq-item p {
            color: var(--text-secondary) !important;
            line-height: 1.7 !important;
            margin: 0 !important;
            font-size: 16px !important;
        }

        .chl-faq-item a {
            color: var(--primary-blue) !important;
            text-decoration: none !important;
            font-weight: 600 !important;
        }

        .chl-faq-item a:hover {
            text-decoration: underline !important;
        }

        .chl-disclaimer {
            margin: 30px 0 !important;
            padding: 25px !important;
            background: #FEF3C7 !important;
            border: 2px solid #D97706 !important;
            border-radius: 16px !important;
        }

        .chl-disclaimer h3 {
            color: #92400E !important;
            font-size: 20px !important;
            font-weight: 700 !important;
            margin-bottom: 12px !important;
        }

        .chl-disclaimer p {
            color: #92400E !important;
            line-height: 1.6 !important;
            margin: 0 !important;
            font-size: 15px !important;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .chl-section-heading {
                font-size: 24px !important;
                padding: 16px !important;
            }
            
            .chl-content-card,
            .chl-research-card {
                padding: 20px !important;
            }
            
            .chl-content-card h3,
            .chl-research-card h4 {
                font-size: 18px !important;
            }
            
            .chl-content-card p,
            .chl-research-card p {
                font-size: 15px !important;
            }
            
            .chl-standards-table {
                font-size: 12px !important;
            }
            
            .chl-standards-table th,
            .chl-standards-table td {
                padding: 10px 12px !important;
            }
            
            .chl-mechanism-header {
                font-size: 16px !important;
                padding: 14px 18px !important;
            }
            
            .chl-sources-grid {
                grid-template-columns: 1fr !important;
            }
        }
    </style>
